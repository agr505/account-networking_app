'use strict';
var express = require('express');
var debug = require('debug')('ft-next-splunk-logger-test');
var log = require('../../src/main')('ft-next-splunk-logger-test');

var app = express();
var PORT = 1981;

app.get('/test', function(req, res){

	log('simple log message');
	log('more useful log: url=%s headers: %o', req.url, req.headers);
	//log(req);

	try{
		throw new Error('Here is an error');
	}catch(e){
		debug(e);
		log(e);
	}


	res.status(200).send('Data should be logged - wait a few minutes and then check splunk!');
});

app.listen(PORT);

debug('listening on port %s', PORT);
