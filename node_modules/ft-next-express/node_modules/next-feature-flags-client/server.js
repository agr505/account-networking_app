'use strict';

var Flags = require('./lib/flags');
var aWeek = 1000 * 60 * 60 * 24 * 7;
var eagerFetch = require('./lib/eager-fetch');

module.exports = new Flags({
	alerter: function (flag) {
		if (process.env.NODE_ENV !== 'production') {
			if (new Date().getTime() - (flag.expiry.getTime() + aWeek) <= 0) {
				return;
			}
			console.error(flag.name + ' is still in the codebase but expired more than a week ago');
		}
	}
});

module.exports.eagerFetch = eagerFetch;
module.exports.middleware = require('./lib/middleware');
