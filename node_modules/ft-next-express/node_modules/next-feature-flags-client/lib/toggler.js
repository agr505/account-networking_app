'use strict';

// Cookie looks like this: next-flags=ads:on,tearsheets:off
var regex = new RegExp('(?:^|;)\\s?next-flags=(.*?)(?:;|$)', 'i');

module.exports = {
	readFromCookie: function (cookie) {
		cookie = cookie || '';
		return (cookie.match(regex) || [null, ''])[1];
	},
	override: function (target, rawOverrides) {
		if (rawOverrides) {
			rawOverrides.split(',').forEach(function(flag) {
				flag = flag.split(':');
				if (flag[1] === 'on') {
					target[flag[0]] = true;
				} else {
					target[flag[0]] = false;
				}
			});
		}
		return target;
	}
};
