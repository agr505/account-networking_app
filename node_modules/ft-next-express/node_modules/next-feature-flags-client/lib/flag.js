'use strict';

module.exports = Flag;

function Flag(flag, options) {
	options = options || {};
	this.name = flag.name;
	this.description = flag.description;
	this.safeState = flag.safeState;
	this.expiry = new Date(flag.expiry);
	this.state = typeof options.override === 'boolean' ? options.override : flag.state;
}

Object.defineProperty(Flag.prototype, 'isSwitchedOn', {
	get: function () {
		return this.isPastSellByDate ? this.safeState : this.state;
	}
});

Object.defineProperty(Flag.prototype, 'isPastSellByDate', {
	get: function () {
		return (new Date() - this.expiry) > 0;
	}
});
